<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/index.css" />
	<script src="js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/auth.js"></script>
    <title>My Hobby Hive</title>
</head>
<body>
	<header class="header">
		<div class="logo_prm"><img src="img/logo_small.png" /></div>
		<div class="page_title">Profile</div>
		<div class="menu" id="menu"></div>
	</header>
	<div class="menu_container">
		<ul class="menu_item">
			<a href="#"><li>About Us</li></a>
			<a href="#"><li>Tell a Friend</li></a>
			<a href="#"><li>Career</li></a>
			<a href="#"><li>FAQ's</li></a>
			<a href="#"><li>Data Use Policy</li></a>
			<a href="#"><li>Cookies</li></a>
			<a href="#" id="logout"><li>Logout</li></a>
		</ul>
	</div>
	<div class="profile_main">
		<div class="profile_pic" id="profile_pic"></div>
		<div class="profile_name" id="user_name"></div>
		<div class="profile_des" id="about_me"></div>
		<div class="profile_edit">
			<a href="profile_edit.html"><div class="btn">Edit Profile</div></a>
			<a href="add_club.html"><div class="btn">Add New Club</div></a>
			<a href="join_club.html"><div class="btn">Join New Club</div></a>
		</div>
	</div>
	<div class="profile_trophies">
		<div class="title">Trophies<span>view all</span></div>
		<div class="trophy" id="trophy">
		</div>
	</div>
	<div class="profile_trophies">
		<div class="title">My Friends<span>view all</span><span>Find Friends</span></div>
		<div class="trophy" id="friends">
		</div>
	</div>
	<div class="white_space"></div>
	<footer>
		<div class="links">
			<a href="social_wall.html"><div class="social_wall">Social Wall</div></a>
			<a href="profile.html"><div class="profile selected">Profile</div></a>
			<a href="messages.html"><div class="messages">Messages</div></a>
			<a href="diary.html"><div class="diary">Diary</div></a>
			<a href="hobbies.html"><div class="hobby_link">Find a Hobby</div></a>
		</div>
	</footer>
        <script type="text/javascript" src="cordova.js"></script>
        <!--script type="text/javascript">
            app.initialize();
        </script-->
		<script>
			$(document).ready(function(){		
			var id = localStorage.getItem("hobby_userID");
			var sendData = { "id": id};
			$('body').append("<div class='loading'></div>");
			$.ajax({
				type: "POST",
				url: "http://www.mhhdev.com/mobileapp/newdb/profile.php",
				data: sendData,
				dataType: "json",
				success: function(data) {
					if(data['success'] == 1){
						$("#user_name").html(data['fname']+" "+ data['lname']);
						$("#about_me").html(data['aboutme']);
						$("#profile_pic").html("<img src='https://www.myhobbyhive.com/clubuserimages/profile/"+data['image']+"' />");
						if(data['awards']==0){
							$("#trophy").html("<div class='empty'>No Awards Yet</div>");
						}else{
							var awards = [];
							for(var i in data['award']){
								awards.push("<img src='img/"+data['award'][i]+"' />");
							}
							$("#trophy").html(awards.join(''));							
						}
						if(data['friends']==0){
							$("#friends").html("<div class='empty'>No Friends Yet</div>");
						}else{
							var friends = [];
							for(var i in data['friend']){
								if(data['friend'][i]!= null){
								friends.push("<img src='https://www.myhobbyhive.com/clubuserimages/profile/"+data['friend'][i]+"' />");
								}else{
								friends.push("<img src='https://www.myhobbyhive.com/clubuserimages/profile/noimage.png' />");
								}
							}
							$("#friends").html(friends.join(''));							
						}
						$('.loading').remove();
					}
					
				},
				error: function(data, textStatus, errorThrown) { 
					$('body').append("<div class='connection_error'>Unable to connect to internet</div>");
                } 
				});
			});
		</script>
</body>
</html>