<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="css/index.css" />
		<script src="js/jquery-1.11.2.min.js"></script>
		<script>
		$(function () {
			if (!(localStorage.getItem("hobby_email") === null)&& !(localStorage.getItem("hobby_pass") === null)){
			window.location = 'userpage.html';
		}
		});
		</script>
        <script type="text/javascript" src="js/index.js"></script>
        <title>New to myhobbyhive</title>
    </head>
    <body>
        <div class="app">
			<div class="logo_home"><img src="img/logo.png" /></div>
			<h2>New to myhobbyhive?</h2>
			<div class="social_login">
				<div class="social_button"><img src="img/fb_login.png"></div>
				<div class="social_button"><img src="img/gplus_login.png"></div>
			</div>
			<hr>
			<div class="sign_up">
				<form class="signup_form" id="signup_form">
					<div class="error" id="error"></div>
					<div class="input"><input type="email" id="s_email" name="email" placeholder="Email" /></div>
					<div class="input"><input type="password" id="s_pass" name="pass" placeholder="Password" /></div>
					<div class="input"><input type="submit" id="sign_up" class="sign_up_button" name="submit" value="SIGN UP FOR HOBBYHIVE" /></div>
					<div class="checkbox"><input type="checkbox" id="confirm" name="confirm" checked>
					<label>I have read and accepted the Terms and Conditions and myHobbyHive may set cookies 
on my browser.</label></div>
				</form>
			</div>
			<div class="redirect">Club User Account : <a href="login.html">Login</a></div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
		<script>
		$(document).ready(function(){
			$("#sign_up").click(function(e){
			e.preventDefault();
			$(this).prop('disabled', true);
			$('body').prepend("<div class='loading'></div>");
			var s_email = $("#s_email").val();
			var s_pass = $("#s_pass").val();
			var sendData = { "email":s_email, "pass":s_pass };

			if($("#confirm:checked")&&($("#s_email").val()!="")&&($("#s_pass").val()!="")){
			$.ajax({
				type: "POST",
				url: "http://dev.myhobbyhive.com/mobileapp/register.php",
				data: sendData,
				dataType: "json",
				success: function(data) {
					if (data['success']=='0'){
					var response = data['message'];
					$("#login").prop('disabled', false);
					$('.loading').remove();
					$("#error").html(response);
					} else { 
					localStorage.setItem("hobby_email", s_email);
					localStorage.setItem("hobby_pass", s_pass);
						window.location = 'index.html';
					}
				},
				error: function(data, textStatus, errorThrown) { 
                    alert("Status: " + textStatus); alert("Error: " + errorThrown); 
                } 

			});
			} else{
				$("#error").html("Please fill all the data");
					$("#login").prop('disabled', false);
					$('.loading').remove();
			}
			 return false;
			});
				$('a').click(function(e){
					e.preventDefault();
					$('body').prepend("<div class='loading'></div>");
					window.location = $(this).attr('href');;
				});			
		});		
		</script>
    </body>
</html>
